import{S as e,U as a,b as l,I as t,V as r,W as u,R as s,F as d,i as n,B as o,H as i,X as v,Y as f,E as m,a as p}from"./ant-design-vue-ceZujQnV.js";import{d as k,f as c,r as g,Y as y,Z as _,k as h,E as b,W as w,I as x,e as C,V as U,a1 as T,ab as q,F as D,aa as Y,u as N,a5 as P}from"./vue-vendor-CFnyIo_N.js";const j=k({__name:"Worehouse",setup(n,{expose:o}){const i=c(),v=g({name:"",url:"",owner:void 0,approver:void 0,time:[],type:void 0}),f={name:[{required:!0,message:"请填写仓库名",trigger:"blur"}],url:[{required:!0,message:"请填写仓库域名",trigger:"blur"}],owner:[{required:!0,message:"请选择仓库管理员",trigger:"change"}],approver:[{required:!0,message:"请选择审批人",trigger:"change"}],time:[{required:!0,message:"请选择生效日期",trigger:"change",type:"array"}],type:[{required:!0,message:"请选择仓库类型",trigger:"change"}]},m=()=>{i.value.validate().then(()=>{}).catch(e=>{})};return o({formRef:i}),(n,o)=>{const p=t,k=l,c=a,g=u,x=r,C=e,U=s,T=d;return w(),y(T,{onSubmit:m,layout:"vertical",rules:f,ref_key:"formRef",ref:i,model:v},{default:_(()=>[h(C,{justify:"space-between"},{default:_(()=>[h(c,{span:7},{default:_(()=>[h(k,{label:"仓库名：",ref:"name",name:"name"},{default:_(()=>[h(p,{value:v.name,"onUpdate:value":o[0]||(o[0]=e=>v.name=e),placeholder:"请输入仓库名"},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"仓库域名：",ref:"url",name:"url"},{default:_(()=>[h(p,{addonBefore:"http://",addonAfter:".com",value:v.url,"onUpdate:value":o[1]||(o[1]=e=>v.url=e),placeholder:"请输入仓库域名"},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"仓库管理员：",ref:"owner",name:"owner"},{default:_(()=>[h(x,{value:v.owner,"onUpdate:value":o[2]||(o[2]=e=>v.owner=e),placeholder:"请选择仓库管理员"},{default:_(()=>[h(g,{value:"云破天"},{default:_(()=>[...o[6]||(o[6]=[b("云破天",-1)])]),_:1}),h(g,{value:"佛子"},{default:_(()=>[...o[7]||(o[7]=[b("佛子",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1}),h(C,{justify:"space-between"},{default:_(()=>[h(c,{span:7},{default:_(()=>[h(k,{label:"审批人：",ref:"approver",name:"approver"},{default:_(()=>[h(x,{value:v.approver,"onUpdate:value":o[3]||(o[3]=e=>v.approver=e),placeholder:"请选择审批员"},{default:_(()=>[h(g,{value:"王晓丽"},{default:_(()=>[...o[8]||(o[8]=[b("王晓丽",-1)])]),_:1}),h(g,{value:"李军"},{default:_(()=>[...o[9]||(o[9]=[b("李军",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"生效日期：",ref:"time",name:"time"},{default:_(()=>[h(U,{style:{width:"100%"},format:"YYYY-MM-DD",value:v.time,"onUpdate:value":o[4]||(o[4]=e=>v.time=e)},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"仓库类型：",ref:"type",name:"type"},{default:_(()=>[h(x,{value:v.type,"onUpdate:value":o[5]||(o[5]=e=>v.type=e),placeholder:"请选择仓库类型"},{default:_(()=>[h(g,{value:"公开"},{default:_(()=>[...o[10]||(o[10]=[b("公开",-1)])]),_:1}),h(g,{value:"公开"},{default:_(()=>[...o[11]||(o[11]=[b("私有",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["model"])}}}),E=k({__name:"TaskForm",setup(n,{expose:o}){const i=c(),v=g({taskName:"",taskDesc:"",taskExecutor:void 0,taskPerson:void 0,taskTime:[],taskType:void 0}),f={taskName:[{required:!0,message:"请填写任务名",trigger:"blur"}],taskDesc:[{required:!0,message:"请填写任务描述",trigger:"blur"}],taskExecutor:[{required:!0,message:"请选择任务执行人",trigger:"change"}],taskPerson:[{required:!0,message:"请选择责任人",trigger:"change"}],taskTime:[{required:!0,message:"请选择提醒日期",trigger:"change",type:"array"}],taskType:[{required:!0,message:"请选择任务类型",trigger:"change"}]},m=()=>{i.value.validate().then(()=>{}).catch(e=>{})};return o({formRef:i}),(n,o)=>{const p=t,k=l,c=a,g=u,x=r,C=e,U=s,T=d;return w(),y(T,{onSubmit:m,layout:"vertical",rules:f,ref_key:"formRef",ref:i,model:v},{default:_(()=>[h(C,{justify:"space-between"},{default:_(()=>[h(c,{span:7},{default:_(()=>[h(k,{label:"任务名：",ref:"taskName",name:"taskName"},{default:_(()=>[h(p,{value:v.taskName,"onUpdate:value":o[0]||(o[0]=e=>v.taskName=e),placeholder:"请输入任务名"},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"任务描述：",ref:"taskDesc",name:"taskDesc"},{default:_(()=>[h(p,{value:v.taskDesc,"onUpdate:value":o[1]||(o[1]=e=>v.taskDesc=e),placeholder:"请输入任务描述"},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"执行人：",ref:"taskExecutor",name:"taskExecutor"},{default:_(()=>[h(x,{value:v.taskExecutor,"onUpdate:value":o[2]||(o[2]=e=>v.taskExecutor=e),placeholder:"请选择执行人"},{default:_(()=>[h(g,{value:"云破天"},{default:_(()=>[...o[6]||(o[6]=[b("云破天",-1)])]),_:1}),h(g,{value:"佛子"},{default:_(()=>[...o[7]||(o[7]=[b("佛子",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1}),h(C,{justify:"space-between"},{default:_(()=>[h(c,{span:7},{default:_(()=>[h(k,{label:"责任人：",ref:"taskPerson",name:"taskPerson"},{default:_(()=>[h(x,{value:v.taskPerson,"onUpdate:value":o[3]||(o[3]=e=>v.taskPerson=e),placeholder:"请选择责任人"},{default:_(()=>[h(g,{value:"王晓丽"},{default:_(()=>[...o[8]||(o[8]=[b("王晓丽",-1)])]),_:1}),h(g,{value:"李军"},{default:_(()=>[...o[9]||(o[9]=[b("李军",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"提醒日期：",ref:"taskTime",name:"taskTime"},{default:_(()=>[h(U,{style:{width:"100%"},format:"YYYY-MM-DD",value:v.taskTime,"onUpdate:value":o[4]||(o[4]=e=>v.taskTime=e)},null,8,["value"])]),_:1},512)]),_:1}),h(c,{span:7},{default:_(()=>[h(k,{label:"任务类型：",ref:"taskType",name:"taskType"},{default:_(()=>[h(x,{value:v.taskType,"onUpdate:value":o[5]||(o[5]=e=>v.taskType=e),placeholder:"请选择任务类型"},{default:_(()=>[h(g,{value:"定时执行"},{default:_(()=>[...o[10]||(o[10]=[b("定时执行",-1)])]),_:1}),h(g,{value:"周期执行"},{default:_(()=>[...o[11]||(o[11]=[b("周期执行",-1)])]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["model"])}}}),I={class:"w-full"},R={key:0},F={key:0,class:"editable-row-operations"},M={key:0},A={key:0},S=["onClick"],W=["onClick"],B={key:1},O=["onClick"],V=["onClick"],H={key:1},X=["onClick"],Z={class:"footer-bar flex flex-end"},$=k({__name:"AdvancedFrom",setup(e){const a=[{title:"成员姓名",dataIndex:"name",width:"25%"},{title:"年龄",dataIndex:"age",width:"15%"},{title:"所属部门",dataIndex:"address",width:"40%"},{title:"操作",dataIndex:"operation"}],l=c([{key:"1",name:"小红",age:18,address:"开发部"},{key:"2",name:"张晓丽",age:29,address:"ui设计"},{key:"3",name:"Anxure",age:22,address:"前端开发组"}]),r=g({}),u=C(()=>l.value.length+1),s=c(!1),d=c(),k=c(),$=e=>{const{name:a,age:t,address:u}=r[e];a&&t&&u?(Object.assign(l.value.filter(a=>e===a.key)[0],r[e],{isNew:!1}),delete r[e]):p.error("请填写完整成员信息。")},z=()=>{l.value.push({key:`${u.value}`,name:"",age:void 0,address:"",isNew:!0}),r[l.value[l.value.length-1].key]=m(l.value.filter(e=>l.value[l.value.length-1].key===e.key)[0])},G=()=>{s.value=!0;const e=new Promise((e,a)=>{d.value.formRef.validate().then(a=>{e(a)}).catch(e=>{a(e)})}),a=new Promise((e,a)=>{k.value.formRef.validate().then(a=>{e(a)}).catch(e=>{a(e)})});s.value=!0,Promise.all([e,a]).then(e=>{s.value=!1,Object.assign(e,{user:x(l.value)}),p.info("请打开控制台查看输出值")}).catch(e=>{s.value=!1})};return(e,u)=>{const p=n,c=t,g=v,x=i,C=o;return w(),U("div",I,[h(p,{title:"仓库管理",bordered:!1},{default:_(()=>[h(j,{ref_key:"worehouse",ref:d},null,512)]),_:1}),h(p,{title:"任务管理",bordered:!1},{default:_(()=>[h(E,{ref_key:"taskForm",ref:k},null,512)]),_:1}),h(p,{title:"成员管理",bordered:!1},{default:_(()=>[h(x,{columns:a,"data-source":l.value,pagination:!1},{bodyCell:_(({text:e,record:a,index:t,column:s})=>[(w(),U(D,null,Y(["name","age","address"],l=>(w(),U(D,{key:l},[s.dataIndex===l?(w(),U("div",R,[r[a.key]?(w(),y(c,{key:0,value:r[a.key][l],"onUpdate:value":e=>r[a.key][l]=e,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(w(),U(D,{key:1},[b(P(e),1)],64))])):q("",!0)],64))),64)),"operation"===s.dataIndex?(w(),U("div",F,[r[a.key]?(w(),U("span",M,[a.isNew?(w(),U("span",B,[T("a",{class:"mr-1",onClick:e=>$(a.key)},"添加",8,O),T("a",{onClick:e=>{return t=a.key,void(l.value=l.value.filter(e=>e.key!==t));var t}},"删除",8,V)])):(w(),U("span",A,[T("a",{class:"mr-1",onClick:e=>$(a.key)},"保存",8,S),T("a",{onClick:e=>{return l=a.key,void delete r[l];var l}},"取消",8,W)]))])):(w(),U("span",H,[T("a",{class:"mr-1",onClick:e=>{return t=a.key,void(r[t]=m(l.value.filter(e=>t===e.key)[0]));var t}},"编辑",8,X),h(g,{title:"是否要删除此行？",onConfirm:e=>{return t=a.key,void(l.value=l.value.filter(e=>e.key!==t));var t}},{default:_(()=>[...u[0]||(u[0]=[T("a",null,"删除",-1)])]),_:1},8,["onConfirm"])]))])):q("",!0)]),_:1},8,["data-source"]),h(C,{style:{width:"100%","margin-top":"16px","margin-bottom":"8px"},type:"dashed",onClick:z},{icon:_(()=>[h(N(f))]),default:_(()=>[u[1]||(u[1]=b(" 新增成员 ",-1))]),_:1})]),_:1}),T("div",Z,[h(C,{type:"primary",style:{"margin-right":"10px"},onClick:G,loading:s.value},{default:_(()=>[...u[2]||(u[2]=[b("提交",-1)])]),_:1},8,["loading"])])])}}});export{$ as default};
