import{I as H,c as oe}from"./index-BSTwqJKf.js";import{C as be,R as he}from"./Col-BH6BdDn_.js";import{ao as X,V as U,X as ue,d as q,W as Ce,ap as xe,f as e,E as j,L,B as we,x as N,a as I,O as Pe,af as Te,z as Se,m as W,aq as Oe,ar as Ne,y as Be,as as $e,at as F,au as De,av as Ie,r as G,o as P,$ as J,w as a,j as h,h as A,c as O,a5 as Y,a6 as Re,t as Fe,aw as le,b as D,e as je,a2 as se}from"./index-C9KpkboQ.js";import{a as ie,b as ce}from"./index-kw55o-Ek.js";import{_ as de,F as me}from"./index-BEELLS4-.js";import{R as fe}from"./dayjs-El99-0Rs.js";import{a as Ee,P as qe}from"./index-Bv-LeY1F.js";import{C as Ue}from"./index-MCi_0Bx6.js";import{t as Ae,o as Me,a as ze,b as Ve}from"./collapseMotion-Yp2E69V-.js";import{i as Ye}from"./compact-item-DkwYf7XX.js";import{c as K,B as Q}from"./index-CMDgY9D-.js";import{u as Le,K as We}from"./shallowequal-9U5DN-rv.js";import{_ as Ke}from"./index-DtnPxBxz.js";import"./styleChecker-hs9ODizI.js";import"./LeftOutlined-B0isYnHm.js";import"./useMemo-OMhPJlgs.js";import"./hasIn-DH1zYR4Z.js";import"./FileOutlined-ClqVPlLG.js";import"./index-BuIjfHSI.js";const pe=X(be),He=()=>{const n=U(!1);return ue(()=>{n.value=!0}),n},Xe={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:L(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function re(n){return!!(n&&n.then)}const Ge=q({compatConfig:{MODE:3},name:"ActionButton",props:Xe,setup(n,f){let{slots:u}=f;const t=U(!1),i=U(),C=U(!1);let p;const l=He();Ce(()=>{n.autofocus&&(p=setTimeout(()=>{var s,c;return(c=(s=xe(i.value))===null||s===void 0?void 0:s.focus)===null||c===void 0?void 0:c.call(s)}))}),ue(()=>{clearTimeout(p)});const g=function(){for(var s,c=arguments.length,_=new Array(c),T=0;T<c;T++)_[T]=arguments[T];(s=n.close)===null||s===void 0||s.call(n,..._)},d=s=>{re(s)&&(C.value=!0,s.then(function(){l.value||(C.value=!1),g(...arguments),t.value=!1},c=>(l.value||(C.value=!1),t.value=!1,Promise.reject(c))))},v=s=>{const{actionFn:c}=n;if(t.value)return;if(t.value=!0,!c){g();return}let _;if(n.emitEvent){if(_=c(s),n.quitOnNullishReturnValue&&!re(_)){t.value=!1,g(s);return}}else if(c.length)_=c(n.close),t.value=!1;else if(_=c(),!_){g();return}d(_)};return()=>{const{type:s,prefixCls:c,buttonProps:_}=n;return e(Q,j(j(j({},K(s)),{},{onClick:v,loading:C.value,prefixCls:c},_),{},{ref:i}),u)}}}),Je=n=>{const{componentCls:f,iconCls:u,zIndexPopup:t,colorText:i,colorWarning:C,marginXS:p,fontSize:l,fontWeightStrong:g,lineHeight:d}=n;return{[f]:{zIndex:t,[`${f}-inner-content`]:{color:i},[`${f}-message`]:{position:"relative",marginBottom:p,color:i,fontSize:l,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${f}-message-icon ${u}`]:{color:C,fontSize:l,flex:"none",lineHeight:1,paddingTop:(Math.round(l*d)-l)/2},"&-title":{flex:"auto",marginInlineStart:p},"&-title-only":{fontWeight:g}},[`${f}-description`]:{position:"relative",marginInlineStart:l+p,marginBottom:p,color:i,fontSize:l},[`${f}-buttons`]:{textAlign:"end",button:{marginInlineStart:p}}}}},Qe=we("Popconfirm",n=>Je(n),n=>{const{zIndexPopupBase:f}=n;return{zIndexPopup:f+60}});var Ze=function(n,f){var u={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&f.indexOf(t)<0&&(u[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,t=Object.getOwnPropertySymbols(n);i<t.length;i++)f.indexOf(t[i])<0&&Object.prototype.propertyIsEnumerable.call(n,t[i])&&(u[t[i]]=n[t[i]]);return u};const et=()=>N(N({},Ve()),{prefixCls:String,content:F(),title:F(),description:F(),okType:De("primary"),disabled:{type:Boolean,default:!1},okText:F(),cancelText:F(),icon:F(),okButtonProps:L(),cancelButtonProps:L(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),tt=q({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:Ye(et(),N(N({},Ae()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(n,f){let{slots:u,emit:t,expose:i,attrs:C}=f;const p=I();Pe(n.visible===void 0),i({getPopupDomNode:()=>{var r,m;return(m=(r=p.value)===null||r===void 0?void 0:r.getPopupDomNode)===null||m===void 0?void 0:m.call(r)}});const[l,g]=Le(!1,{value:Te(n,"open")}),d=(r,m)=>{n.open===void 0&&g(r),t("update:open",r),t("openChange",r,m)},v=r=>{d(!1,r)},s=r=>{var m;return(m=n.onConfirm)===null||m===void 0?void 0:m.call(n,r)},c=r=>{var m;d(!1,r),(m=n.onCancel)===null||m===void 0||m.call(n,r)},_=r=>{r.keyCode===We.ESC&&l&&d(!1,r)},T=r=>{const{disabled:m}=n;m||d(r)},{prefixCls:y,getPrefixCls:o}=Se("popconfirm",n),S=W(()=>o()),x=W(()=>o("btn")),[B]=Qe(y),[w]=Oe("Popconfirm",Ne.Popconfirm),M=()=>{var r,m,k,R,$;const{okButtonProps:b,cancelButtonProps:E,title:z=(r=u.title)===null||r===void 0?void 0:r.call(u),description:V=(m=u.description)===null||m===void 0?void 0:m.call(u),cancelText:ve=(k=u.cancel)===null||k===void 0?void 0:k.call(u),okText:ge=(R=u.okText)===null||R===void 0?void 0:R.call(u),okType:Z,icon:ee=(($=u.icon)===null||$===void 0?void 0:$.call(u))||e(Ie,null,null),showCancel:ke=!0}=n,{cancelButton:te,okButton:ae}=u,ne=N({onClick:c,size:"small"},E),ye=N(N(N({onClick:s},K(Z)),{size:"small"}),b);return e("div",{class:`${y.value}-inner-content`},[e("div",{class:`${y.value}-message`},[ee&&e("span",{class:`${y.value}-message-icon`},[ee]),e("div",{class:[`${y.value}-message-title`,{[`${y.value}-message-title-only`]:!!V}]},[z])]),V&&e("div",{class:`${y.value}-description`},[V]),e("div",{class:`${y.value}-buttons`},[ke?te?te(ne):e(Q,ne,{default:()=>[ve||w.value.cancelText]}):null,ae?ae(ye):e(Ge,{buttonProps:N(N({size:"small"},K(Z)),b),actionFn:s,close:v,prefixCls:x.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[ge||w.value.okText]})])])};return()=>{var r;const{placement:m,overlayClassName:k,trigger:R="click"}=n,$=Ze(n,["placement","overlayClassName","trigger"]),b=Me($,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),E=Be(y.value,k);return B(e(Ee,j(j(j({},b),C),{},{trigger:R,placement:m,onOpenChange:T,open:l.value,overlayClassName:E,transitionName:$e(S.value,"zoom-big",n.transitionName),ref:p,"data-popover-inject":!0}),{default:()=>[ze(((r=u.default)===null||r===void 0?void 0:r.call(u))||[],{onKeydown:z=>{_(z)}},!1)],content:M}))}}}),at=X(tt),_e=X(he),nt="YYYY-MM-DD",ot=q({__name:"Worehouse",setup(n,{expose:f}){const u=I(),t=G({name:"",url:"",owner:void 0,approver:void 0,time:[],type:void 0}),i={name:[{required:!0,message:"请填写仓库名",trigger:"blur"}],url:[{required:!0,message:"请填写仓库域名",trigger:"blur"}],owner:[{required:!0,message:"请选择仓库管理员",trigger:"change"}],approver:[{required:!0,message:"请选择审批人",trigger:"change"}],time:[{required:!0,message:"请选择生效日期",trigger:"change",type:"array"}],type:[{required:!0,message:"请选择仓库类型",trigger:"change"}]},C=()=>{u.value.validate().then(()=>{A(t)}).catch(p=>{})};return f({formRef:u}),(p,l)=>{const g=H,d=de,v=pe,s=ie,c=ce,_=_e,T=fe,y=me;return P(),J(y,{onSubmit:C,layout:"vertical",rules:i,ref_key:"formRef",ref:u,model:t},{default:a(()=>[e(_,{justify:"space-between"},{default:a(()=>[e(v,{span:7},{default:a(()=>[e(d,{label:"仓库名：",ref:"name",name:"name"},{default:a(()=>[e(g,{value:t.name,"onUpdate:value":l[0]||(l[0]=o=>t.name=o),placeholder:"请输入仓库名"},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"仓库域名：",ref:"url",name:"url"},{default:a(()=>[e(g,{addonBefore:"http://",addonAfter:".com",value:t.url,"onUpdate:value":l[1]||(l[1]=o=>t.url=o),placeholder:"请输入仓库域名"},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"仓库管理员：",ref:"owner",name:"owner"},{default:a(()=>[e(c,{value:t.owner,"onUpdate:value":l[2]||(l[2]=o=>t.owner=o),placeholder:"请选择仓库管理员"},{default:a(()=>[e(s,{value:"云破天"},{default:a(()=>[h("云破天")]),_:1}),e(s,{value:"佛子"},{default:a(()=>[h("佛子")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1}),e(_,{justify:"space-between"},{default:a(()=>[e(v,{span:7},{default:a(()=>[e(d,{label:"审批人：",ref:"approver",name:"approver"},{default:a(()=>[e(c,{value:t.approver,"onUpdate:value":l[3]||(l[3]=o=>t.approver=o),placeholder:"请选择审批员"},{default:a(()=>[e(s,{value:"王晓丽"},{default:a(()=>[h("王晓丽")]),_:1}),e(s,{value:"李军"},{default:a(()=>[h("李军")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"生效日期：",ref:"time",name:"time"},{default:a(()=>[e(T,{style:{width:"100%"},format:nt,value:t.time,"onUpdate:value":l[4]||(l[4]=o=>t.time=o)},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"仓库类型：",ref:"type",name:"type"},{default:a(()=>[e(c,{value:t.type,"onUpdate:value":l[5]||(l[5]=o=>t.type=o),placeholder:"请选择仓库类型"},{default:a(()=>[e(s,{value:"公开"},{default:a(()=>[h("公开")]),_:1}),e(s,{value:"公开"},{default:a(()=>[h("私有")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["model"])}}}),lt="YYYY-MM-DD",st=q({__name:"TaskForm",setup(n,{expose:f}){const u=I(),t=G({taskName:"",taskDesc:"",taskExecutor:void 0,taskPerson:void 0,taskTime:[],taskType:void 0}),i={taskName:[{required:!0,message:"请填写任务名",trigger:"blur"}],taskDesc:[{required:!0,message:"请填写任务描述",trigger:"blur"}],taskExecutor:[{required:!0,message:"请选择任务执行人",trigger:"change"}],taskPerson:[{required:!0,message:"请选择责任人",trigger:"change"}],taskTime:[{required:!0,message:"请选择提醒日期",trigger:"change",type:"array"}],taskType:[{required:!0,message:"请选择任务类型",trigger:"change"}]},C=()=>{u.value.validate().then(()=>{A(t)}).catch(p=>{})};return f({formRef:u}),(p,l)=>{const g=H,d=de,v=pe,s=ie,c=ce,_=_e,T=fe,y=me;return P(),J(y,{onSubmit:C,layout:"vertical",rules:i,ref_key:"formRef",ref:u,model:t},{default:a(()=>[e(_,{justify:"space-between"},{default:a(()=>[e(v,{span:7},{default:a(()=>[e(d,{label:"任务名：",ref:"taskName",name:"taskName"},{default:a(()=>[e(g,{value:t.taskName,"onUpdate:value":l[0]||(l[0]=o=>t.taskName=o),placeholder:"请输入任务名"},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"任务描述：",ref:"taskDesc",name:"taskDesc"},{default:a(()=>[e(g,{value:t.taskDesc,"onUpdate:value":l[1]||(l[1]=o=>t.taskDesc=o),placeholder:"请输入任务描述"},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"执行人：",ref:"taskExecutor",name:"taskExecutor"},{default:a(()=>[e(c,{value:t.taskExecutor,"onUpdate:value":l[2]||(l[2]=o=>t.taskExecutor=o),placeholder:"请选择执行人"},{default:a(()=>[e(s,{value:"云破天"},{default:a(()=>[h("云破天")]),_:1}),e(s,{value:"佛子"},{default:a(()=>[h("佛子")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1}),e(_,{justify:"space-between"},{default:a(()=>[e(v,{span:7},{default:a(()=>[e(d,{label:"责任人：",ref:"taskPerson",name:"taskPerson"},{default:a(()=>[e(c,{value:t.taskPerson,"onUpdate:value":l[3]||(l[3]=o=>t.taskPerson=o),placeholder:"请选择责任人"},{default:a(()=>[e(s,{value:"王晓丽"},{default:a(()=>[h("王晓丽")]),_:1}),e(s,{value:"李军"},{default:a(()=>[h("李军")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"提醒日期：",ref:"taskTime",name:"taskTime"},{default:a(()=>[e(T,{style:{width:"100%"},format:lt,value:t.taskTime,"onUpdate:value":l[4]||(l[4]=o=>t.taskTime=o)},null,8,["value"])]),_:1},512)]),_:1}),e(v,{span:7},{default:a(()=>[e(d,{label:"任务类型：",ref:"taskType",name:"taskType"},{default:a(()=>[e(c,{value:t.taskType,"onUpdate:value":l[5]||(l[5]=o=>t.taskType=o),placeholder:"请选择任务类型"},{default:a(()=>[e(s,{value:"定时执行"},{default:a(()=>[h("定时执行")]),_:1}),e(s,{value:"周期执行"},{default:a(()=>[h("周期执行")]),_:1})]),_:1},8,["value"])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["model"])}}}),rt={class:"w-full background-f"},ut={key:0},it={key:0,class:"editable-row-operations"},ct={key:0},dt={key:0},mt=["onClick"],ft=["onClick"],pt={key:1},_t=["onClick"],vt=["onClick"],gt={key:1},kt=["onClick"],yt=D("a",null,"删除",-1),bt={class:"footer-bar flex flex-end"},At=q({__name:"AdvancedFrom",setup(n){const f=[{title:"成员姓名",dataIndex:"name",width:"25%"},{title:"年龄",dataIndex:"age",width:"15%"},{title:"所属部门",dataIndex:"address",width:"40%"},{title:"操作",dataIndex:"operation"}],t=I([{key:"1",name:"小红",age:18,address:"开发部"},{key:"2",name:"张晓丽",age:29,address:"ui设计"},{key:"3",name:"Anxure",age:22,address:"前端开发组"}]),i=G({}),C=W(()=>t.value.length+1),p=I(!1),l=I(),g=I(),d=o=>{i[o]=oe(t.value.filter(S=>o===S.key)[0])},v=o=>{const{name:S,age:x,address:B}=i[o];if(!S||!x||!B){se.error("请填写完整成员信息。");return}Object.assign(t.value.filter(w=>o===w.key)[0],i[o],{isNew:!1}),delete i[o]},s=o=>{delete i[o]},c=o=>{t.value=t.value.filter(S=>S.key!==o)},_=o=>{t.value=t.value.filter(S=>S.key!==o)},T=()=>{t.value.push({key:`${C.value}`,name:"",age:void 0,address:"",isNew:!0}),i[t.value[t.value.length-1].key]=oe(t.value.filter(o=>t.value[t.value.length-1].key===o.key)[0])},y=()=>{p.value=!0;const o=new Promise((x,B)=>{A(l.value),l.value.formRef.validate().then(w=>{x(w)}).catch(w=>{B(w)})}),S=new Promise((x,B)=>{g.value.formRef.validate().then(w=>{x(w)}).catch(w=>{B(w)})});p.value=!0,Promise.all([o,S]).then(x=>{p.value=!1,Object.assign(x,{user:A(t.value)}),se.info("请打开控制台查看输出值")}).catch(x=>{p.value=!1})};return(o,S)=>{const x=Ue,B=H,w=at,M=Ke,r=Q;return P(),O("div",rt,[e(x,{title:"仓库管理",bordered:!1},{default:a(()=>[e(ot,{ref_key:"worehouse",ref:l},null,512)]),_:1}),e(x,{title:"任务管理",bordered:!1},{default:a(()=>[e(st,{ref_key:"taskForm",ref:g},null,512)]),_:1}),e(x,{title:"成员管理",bordered:!1},{default:a(()=>[e(M,{columns:f,"data-source":t.value,pagination:!1},{bodyCell:a(({text:m,record:k,index:R,column:$})=>[(P(),O(Y,null,Re(["name","age","address"],b=>(P(),O(Y,{key:b},[$.dataIndex===b?(P(),O("div",ut,[i[k.key]?(P(),J(B,{key:0,value:i[k.key][b],"onUpdate:value":E=>i[k.key][b]=E,style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(P(),O(Y,{key:1},[h(Fe(m),1)],64))])):le("",!0)],64))),64)),$.dataIndex==="operation"?(P(),O("div",it,[i[k.key]?(P(),O("span",ct,[k.isNew?(P(),O("span",pt,[D("a",{class:"r-1",onClick:b=>v(k.key)},"添加",8,_t),D("a",{onClick:b=>_(k.key)},"删除",8,vt)])):(P(),O("span",dt,[D("a",{class:"r-1",onClick:b=>v(k.key)},"保存",8,mt),D("a",{onClick:b=>s(k.key)},"取消",8,ft)]))])):(P(),O("span",gt,[D("a",{class:"r-1",onClick:b=>d(k.key)},"编辑",8,kt),e(w,{title:"是否要删除此行？",onConfirm:b=>c(k.key)},{default:a(()=>[yt]),_:2},1032,["onConfirm"])]))])):le("",!0)]),_:1},8,["data-source"]),e(r,{style:{width:"100%","margin-top":"16px","margin-bottom":"8px"},type:"dashed",onClick:T},{icon:a(()=>[e(je(qe))]),default:a(()=>[h(" 新增成员 ")]),_:1})]),_:1}),D("div",bt,[e(r,{type:"primary",style:{"margin-right":"10px"},onClick:y,loading:p.value},{default:a(()=>[h("提交")]),_:1},8,["loading"])])])}}});export{At as default};
